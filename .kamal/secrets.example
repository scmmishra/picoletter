# Kamal secrets example
# Copy this file to .kamal/secrets.staging or .kamal/secrets.production
# and fill in your values.
#
# Option 1: Direct values
# SECRET_KEY_BASE=your-secret-key-base
#
# Option 2: Bitwarden Secrets Manager
# Requires BWS_ACCESS_TOKEN environment variable
# See: https://bitwarden.com/help/secrets-manager-cli/

# Using Bitwarden Secrets Manager:
PROJECT_ID=your-bitwarden-project-id

SECRETS=$(kamal secrets fetch --adapter bitwarden-sm $PROJECT_ID/all)

# Core (required)
SECRET_KEY_BASE=$(kamal secrets extract SECRET_KEY_BASE $SECRETS)

# Database (primary)
DB_PASSWORD=$(kamal secrets extract DB_PASSWORD $SECRETS)
DB_HOST=localhost
DB_USERNAME=picoletter
DB_NAME=picoletter_production

# Database (queue) â€” only needed if queue runs on a separate DB instance
# Falls back to primary DB vars if not set
QUEUE_DB_PASSWORD=$(kamal secrets extract QUEUE_DB_PASSWORD $SECRETS)
QUEUE_DB_HOST=localhost
QUEUE_DB_USERNAME=picoletter
QUEUE_DB_NAME=picoletter_production_queue

# Cloudflare R2 (required for file storage)
R2__ACCESS_KEY=$(kamal secrets extract R2__ACCESS_KEY $SECRETS)
R2__ACCESS_SECRET=$(kamal secrets extract R2__ACCESS_SECRET $SECRETS)
R2__BUCKET_NAME=$(kamal secrets extract R2__BUCKET_NAME $SECRETS)
R2__ACCOUNT_ID=$(kamal secrets extract R2__ACCOUNT_ID $SECRETS)
R2__PUBLIC_DOMAIN=$(kamal secrets extract R2__PUBLIC_DOMAIN $SECRETS)

# AWS SES (required for sending emails)
AWS_ACCESS_KEY_ID=$(kamal secrets extract AWS_ACCESS_KEY_ID $SECRETS)
AWS_SECRET_ACCESS_KEY=$(kamal secrets extract AWS_SECRET_ACCESS_KEY $SECRETS)
AWS_SES_CONFIGURATION_SET=$(kamal secrets extract AWS_SES_CONFIGURATION_SET $SECRETS)
AWS_ENDPOINT_URL=$(kamal secrets extract AWS_ENDPOINT_URL $SECRETS)
AWS_ENDPOINT_URL_SES=$(kamal secrets extract AWS_ENDPOINT_URL_SES $SECRETS)

# Picoletter config
PICO_SENDING_DOMAIN=$(kamal secrets extract PICO_SENDING_DOMAIN $SECRETS)
SEND_POST_BATCH_SIZE=$(kamal secrets extract SEND_POST_BATCH_SIZE $SECRETS)

# API Keys
ADMIN_API_KEY=$(kamal secrets extract ADMIN_API_KEY $SECRETS)
BILLING_API_KEY=$(kamal secrets extract BILLING_API_KEY $SECRETS)

# Feature flags
ENABLE_BILLING=$(kamal secrets extract ENABLE_BILLING $SECRETS)
ENABLE_AUTO_REMINDERS=$(kamal secrets extract ENABLE_AUTO_REMINDERS $SECRETS)
ENABLE_SCHEDULING=$(kamal secrets extract ENABLE_SCHEDULING $SECRETS)

# OAuth (optional - for social login)
GITHUB_CLIENT_ID=$(kamal secrets extract GITHUB_CLIENT_ID $SECRETS)
GITHUB_CLIENT_SECRET=$(kamal secrets extract GITHUB_CLIENT_SECRET $SECRETS)
GOOGLE_CLIENT_ID=$(kamal secrets extract GOOGLE_CLIENT_ID $SECRETS)
GOOGLE_CLIENT_SECRET=$(kamal secrets extract GOOGLE_CLIENT_SECRET $SECRETS)
