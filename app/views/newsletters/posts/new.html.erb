<%= form_with model: @post, url: create_post_path(slug: @newsletter.slug, id: @post.id), method: :post do |form| %>
  <%= form.hidden_field :newsletter_id, value: @newsletter.id %>
  <div class="max-w-2xl mx-auto space-y-4">
    <label class="space-y-1">
      <%= form.label :title, "Subject", class: "ml-px text-stone-500 font-sans" %>
      <%= form.text_field :title, required: true, class: "input w-full", autofocus: true %>
    </label>
    
    <label class="space-y-1">
      <%= form.label :cohort_id, "Send to Cohort", class: "ml-px text-stone-500 font-sans" %>
      <%= form.select :cohort_id, 
          cohort_options_for_select(@cohorts, @post.cohort_id), 
          { 
            prompt: "ðŸ“¢ All subscribers (#{@newsletter.subscribers.confirmed.count})",
            include_blank: false 
          },
          { 
            class: "input w-full" 
          } %>
      <p class="text-xs text-stone-400 ml-px">Choose a cohort to send this post to specific subscribers only</p>
    </label>
  </div>
  <div
    class="
      max-w-2xl mx-auto mt-5 prose prose-h1:text-2xl
      prose-headings:text-newsletter-primary prose-a:text-newsletter-primary
    "
  >
    <%= form.rich_text_area :content %>
  </div>
  <div class="flex items-end max-w-2xl mx-auto mt-2">
    <%= form.submit "Save Draft", class: "btn btn-primary" %>
  </div>
<% end %>
