<aside
  class="
    sticky top-0 grid h-screen py-5 basis-48 font-sans text-sm font-normal
  "
>
  <section class="flex min-w-0 flex-col justify-between flex-1 space-y-5">
    <div class="space-y-3">
      <%= render "newsletters/partials/account_switcher" %>
      <nav class="flex-grow text-stone-600 -mx-1.5">
        <ul class="grid gap-1">
          <%= render "newsletters/partials/sidebar_link",
          url: posts_path(@newsletter.slug),
          is_active: current_page?(posts_path(@newsletter.slug)),
          label: "Posts",
          count: @newsletter.posts.published.count %>
          <%= render "newsletters/partials/sidebar_link",
          url: drafts_posts_path(@newsletter.slug),
          is_active: current_page?(drafts_posts_path(@newsletter.slug)),
          label: "Drafts",
          count: @newsletter.posts.drafts.count %>
          <%= render "newsletters/partials/sidebar_link",
          url: subscribers_path(@newsletter.slug),
          is_active: current_page?(subscribers_path(@newsletter.slug)),
          label: "Subscribers",
          count: @newsletter.subscribers.verified.count %>
          <%= render "newsletters/partials/sidebar_link",
          url: labels_path(@newsletter.slug),
          is_active: current_page?(labels_path(@newsletter.slug)),
          label: "Labels" %>
          <% settings_url = @newsletter.can_read?(:general) ? settings_path(@newsletter.slug) : profile_settings_path(@newsletter.slug) %>
          <%= render "newsletters/partials/sidebar_link",
          url: settings_url,
          is_active: current_page?(settings_url),
          label: "Settings" %>
        </ul>
      </nav>
    </div>
    <nav class="text-stone-500 justify-self-end -mx-1.5">
      <% pending_invitation = latest_pending_invitation_for_current_user %>
      <% if pending_invitation.present? %>
        <%= link_to invitation_path(token: pending_invitation.token), class: "block bg-white shadow-with-inset p-3 rounded-lg mb-3 group" do %>
          <p class="font-medium mb-2 text-stone-900">You have a pending invitation for <%= pending_invitation.newsletter.title %></p>
          <div class="mt-2 flex items-center justify-between gap-3 text-sm text-stone-700">
            <span>Click here to review</span>
          </div>
        <% end %>
      <% end %>
      <%= render "newsletters/partials/billing_banner" %>
      <ul class="grid gap-1">
        <%= render "newsletters/partials/sidebar_link",
        url: public_newsletter_home_url(@newsletter),
        icon: "arrow-up-right",
        is_active: false,
        target: "_blank",
        label: "Public view" %>
        <%= render "newsletters/partials/sidebar_link",
        url: auth_logout_path,
        icon: "arrow-right-to-line",
        data: {
          turbo_method: :delete,
        },
        is_active: false,
        label: "Log out" %>
      </ul>
    </nav>
  </section>
</aside>
