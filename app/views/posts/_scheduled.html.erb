<% if post.scheduled? %>
  <div
    class="
      border border-stone-200 shadow shadow-stone-500/10 bg-stone-100 rounded-3xl p-6
      -mx-5 gap-5 flex items-start
    "
  >
    <!-- Enhanced Calendar Icon -->
    <div
      class="
        size-[52px] rounded-xl bg-white border flex flex-col border-stone-800
        overflow-hidden
      "
    >
      <div
        class="
          bg-stone-800 py-[5px] text-center text-[11px] leading-none font-bold text-white
          uppercase tracking-wide
        "
      >
        <%= post.scheduled_at_tz.strftime("%b") %>
      </div>
      <div
        class="
          flex flex-grow items-center justify-center w-full text-center bg-white
        "
      >
        <div
          class="
            text-xl font-sans font-bold leading-none text-stone-800 tabular-nums
          "
        ><%= post.scheduled_at_tz.strftime("%-d") %></div>
      </div>
    </div>
    <!-- Content -->
    <div class="flex-1 min-w-0 font-sans">
      <h3 class="text-lg font-semibold text-gray-900 mb-0.5 -mt-0.5">Post Scheduled</h3>
      <div class="flex gap-5">
        <div class="flex items-center gap-2 text-sm text-gray-600">
          <%= lucide_icon("calendar", class: "size-4 text-gray-400") %>
          <span class="font-medium text-gray-900"><%= post.scheduled_at_tz.strftime("%A, %B %e, %Y") %></span>
        </div>

        <div class="flex items-center gap-2 text-sm text-gray-600">
          <%= lucide_icon("clock-2", class: "size-4 text-gray-400") %>
          <span class="font-medium text-gray-900"><%= post.scheduled_at_tz.strftime("%H:%M %p") %></span>
          <span class="text-gray-500">(<%= post.scheduled_at_tz.zone %>)</span>
        </div>
      </div>
      <p class="mt-2 text-stone-600">
        This post will automatically be sent to all your subscribers. You can
        still makes changes to the draft without affecting the schedule
      </p>
    </div>
    <%= form_with model: post, url: unschedule_post_path(slug: post.newsletter.slug, id: post.id), method: :post do |form| %>
      <%= form.submit "Unschedule Post", class: "btn bg-white" %>
    <% end %>
  </div>
<% else %>
  <%= form_with model: post, url: schedule_post_path(slug: post.newsletter.slug, id: post.id), class: 'p-5 -mx-5 border rounded-xl border-stone-100 bg-stone-50', method: :post do |form| %>
    <h3
      class="
        font-sans text-xs font-bold tracking-widest uppercase text-stone-800
      "
    >Schedule post</h3>
    <p class="mt-1 text-stone-800/70">Schedule it to automatically send it later. You can disable this later.</p>
    <%= form.label :scheduled_at,
               "Send at",
               class: "block text-sm font-medium text-stone-700 sr-only" %>
    <%= form.datetime_field :scheduled_at,
                        required: true,
                        class: "mt-1 input w-full font-sans" %>

    <div class="hidden space-y-1">
      <%= form.text_field :timezone,
                      class: "input w-full",
                      data: {
                        controller: "auto-timezone",
                      } %>
    </div>
    <%= form.submit "Schedule for later", class: "btn btn-secondary mt-4" %>
  <% end %>
<% end %>
